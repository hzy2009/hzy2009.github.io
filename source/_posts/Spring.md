---
title: Spring提供的事件驱动模型 观察者抽象
date: 2019-09-25 10:13:24
tags: Spring 观察者模式 事件驱动模型
---
## 事件驱动模型
事件驱动模型也就是我们常说的观察者，或者发布-订阅模型，理解它的几个关键点：
* 首先是一种对象间的一对多关系，比如微信和微信公众号的关系，微信是观察者，微信公众号是被观擦者
* 当目标(微信公众号)发生改变，观察者(微信用户)可以接收到改变
* 观察者如何处理，目标无需干涉，所以就降低耦合度
   
用户注册的例子：
游戏用户注册成功后，可能会发生这么多事
* 加积分
* 发确认邮件
* 获得游戏大礼包

问题：
UserServiceImple类里需要引用创建积分的service，确认邮件的service等，耦合严重，增删功能比较麻烦，也有可能需要调用第三方接口，速度慢，代码维护性差，同时访问数据库多次，用户体验差。    

从以上例子可以看出应该使用一个观察者来解耦service里的依赖关系增加一个Lisyener来解耦UserService和其他功能，即注册成功后，只需要通知相关监听器，不需要关系它们如何处理，一个接口只完成一个功能，增删功能非常容易。  

首先看下Spring提供的事件驱动模型体系图








